(define (reddit-gen w h fn upvoteVal subredPth subredVal topbarVal cntentVal)
(let* (
	(upvoteExt (car (gimp-text-get-extents-fontname upvoteVal 16 PIXELS "IBM Plex Sans Bold")))
	(subredExt (car (gimp-text-get-extents-fontname subredVal 12 PIXELS "IBM Plex Sans Bold")))
	(topbarExt (car (gimp-text-get-extents-fontname topbarVal 12 PIXELS "IBM Plex Sans Medium")))
	
	(image (car (gimp-image-new w h RGB)))
	(bg (car (gimp-layer-new image w h RGB-IMAGE "bg" 100 0)))
	(upvote (car (gimp-file-load-layer 1 image "upvote.jpg" )))
	(downvote (car (gimp-file-load-layer 1 image "downvote.jpg" )))
	(subicon (car (gimp-file-load-layer 1 image subredPth )))
	(submask (car (gimp-file-load-layer 1 image "mask.png" )))
	(bottom (car (gimp-file-load-layer 1 image "bottombar.jpg" )))
)

(gimp-context-set-background '(255 255 255))
(gimp-drawable-fill bg FILL-WHITE)
(gimp-image-insert-layer image bg 0 0)

(gimp-image-insert-layer image upvote 0 0)
(gimp-image-insert-layer image downvote 0 0)
(gimp-image-insert-layer image subicon 0 0)
(gimp-image-insert-layer image bottom 0 0)
(gimp-image-insert-layer image submask 0 0)
(gimp-layer-translate upvote 14 10)
(gimp-layer-translate downvote 18 51)
(gimp-layer-scale subicon 15 15 FALSE)
(gimp-layer-scale submask 15 15 FALSE)
(gimp-layer-translate subicon 57 12)
(gimp-layer-translate submask 57 12)
(gimp-layer-translate bottom 45 (- h 42))

(gimp-context-set-foreground '(0 0 0))
(gimp-text-fontname image -1 (- 29 (/ upvoteExt 2)) 31 upvoteVal 0 TRUE 16 PIXELS "IBM Plex Sans Bold")
(gimp-text-fontname image -1 77 10 subredVal 0 TRUE 12 PIXELS "IBM Plex Sans Bold")
(define content (car (gimp-text-fontname image -1 57 37 cntentVal 0 TRUE 20 PIXELS "IBM Plex Sans Bold")))
(gimp-text-layer-resize content (- w 57) (- h 67))

(gimp-context-set-foreground '(120 124 126))
(gimp-text-fontname image -1 (+ subredExt 81) 10 topbarVal 0 TRUE 12 PIXELS "IBM Plex Sans Medium")

(gimp-display-new image)
(gimp-file-save RUN-NONINTERACTIVE image (car (gimp-image-flatten image)) fn fn)
(gimp-quit TRUE)
))